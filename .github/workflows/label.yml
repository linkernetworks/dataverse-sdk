# This workflow will triage pull requests and apply a label based on the
# paths that are modified in the pull request.
#
# To use this workflow, you will need to set up a .github/labeler.yml
# file with configuration.  For more information, see:
# https://github.com/actions/labeler
# 'pull_request_target' is dangerous. However it can lives with dependabot auto created pr.
# Use trusted action only

name: Labeler
on: [pull_request_target]

jobs:
  label:
    runs-on: ubuntu-latest
    steps:
    - name: Label PR
      uses: actions/labeler@v2
      with:
        repo-token: "${{ secrets.GITHUB_TOKEN }}"
    - name: Label PR size
      uses: codelytv/pr-size-labeler@v1
      # Disable until fixes are available
      # https://github.com/CodelyTV/pr-size-labeler/issues/40
      if: ${{ false }}
      with:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        xs_max_size: '10'
        s_max_size: '100'
        m_max_size: '400'
        l_max_size: '800'
        fail_if_xl: 'true'
        message_if_xl: >
          'This PR exceeds the recommended size of 800 lines.
          Please make sure you are NOT addressing multiple issues with one PR.
          Note this PR might be rejected due to its size.â€™
        github_api_url: 'api.github.com'
